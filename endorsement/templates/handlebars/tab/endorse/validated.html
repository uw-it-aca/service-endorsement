{% load templatetag_handlebars %}
{% tplhandlebars "validated-list" %}

<h3>Review and confirm provisioning services</h3>

<!--  Verify that the UW Netids below are intended for endorsement. -->
<div class="form-group validation">

  <p>You can provision access to UW Office 365 and/or UW G Suite for these UW NetIDs.</p>
  <p>Choose one or both services for each personal UW NetID, ensure that a valid email address is present, and select the reason you are provisioning the service(s). Each person will receive an email with terms and conditions that they must accept in order to access the service(s).</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th colspan="4"></th>
      <th colspan="2" class="col-border-left">UW Office 365 (O365)</th>
      <th colspan="2" class="col-border-left">UW G Suite</th>
    </tr>
    <tr>
      <th>UW NetID</th>
      <th>Name</th>
      <th>Email address (required)</th>
      <th>Reason for provisioning services (required)</th>
      <th class="col-border-left" style="width: 135px;">{{#if o365_endorsable}}Provision O365{{/if}}</th>
      <th>Comment</th>
      <th class="col-border-left" style="width: 150px;">{{#if google_endorsable}}Provision G Suite{{/if}}</th>
      <th>Comment</th>
    </tr>
  </thead>
  {{#each netids}}
  {{#if valid_netid}}
  <tr>
    <td><span class="endorsed_netid">{{netid}}</span></td>
    <td><span class="endorsed_name">{{name}}</span></td>
    <td>
      <div class="editing-email visually-hidden">
        <input type=input class="email-editor" placeholder="Email address required" value="{{email}}" style="width: 160px;"> <span style="display: none;">Valid email required</span><a href="javascript:void(0);" class="finish-edit-email"><i class="fa fa-minus-circle failure"></i></a>
      </div>
      <div class="displaying-email">
        <span class="shown-email">{{email}}</span> <br><a href="javascript:void(0);" class="edit-email"><p style="font-size: small;">Edit</p></a>
      </div>
    </td>
    <td>
      {{> reasons_partial .}}
    </td>
     {{#with (subscription_context o365 netid 'o365') }}
        {{> validation_partial .}}
     {{/with}}
     {{#with (subscription_context google netid 'google') }}
        {{> validation_partial .}}
     {{/with}}
  </tr>
  {{else}}
  <tr class="invalid-netid">
    <td>{{netid}}</td>
    <td colspan="3">{{#if error_message}}{{error_message}}{{else}}{{#if ../is_shared}}Shared UW NetIDs cannot be provisioned here. <a href="#shared" class='tab-link'>Provision services to your Shared UW NetIDs</a>{{else}}{{#if ../is_ineligible}}Ineligible UW NetID{{else}}Not a valid UW NetID{{/if}}{{/if}}{{/if}}</td>
    <td class="centered col-border-left">n/a</td>
    <td></td>
    <td class="centered col-border-left">n/a</td>
    <td></td>
  </tr>
  {{/if}}
  {{/each}}

</table>
</div>
<div>
  <button type="button" name="BackToUWNetids" id="netid_input" class="btn btn-normal button-link">Back to list of UW NetIDs</button>

<!-- Button trigger modal -->

  <button type="button" id="confirm_endorsements" class="btn btn-primary" data-toggle="modal" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Provisioning..." data-target="#responsibility_modal"><span class="has_netids">Provision services to selected UW NetIDs</span><span class="no_netids" style="display: none;">No UW NetIDs selected</span></button>
  </div>

<!-- Responsiblity Modal -->
<div class="modal fade" id="responsibility_modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
    </div>
  </div>
</div>

{% endtplhandlebars %}
